{% extends 'base.html.twig' %}

{% block title %}Toutes les recettes de cuisine
{% endblock %}

{% block body %}
	<style>
		.example-wrapper {
			margin: 1em auto;
			max-width: 800px;
			width: 95%;
			font: 18px / 1.5 sans-serif;
		}
		.example-wrapper code {
			background: #F5F5F5;
			padding: 2px 6px;
		}
	</style>

	<div class="example-wrapper">
		<div class="mb-4 d-flex justify-content-end">
			<a class="btn btn-primary" href="{{ path('recipe.create') }}">Create a new recipe</a>
		</div>
		<h1>Toutes les recettes</h1>

		<table class="table table-striped">
		<thead>
			<tr>
				<th>Title</th>
				<th>Duration</th>
				<th>Actions</th>
			</tr>
		</thead>
		<tbody>
			{% for recipe in recipes %}
				<tr>
					<td>{{ recipe.title }}</td>
					<td>{{ recipe.duration }} min</td>
					<td class="">
						<div class="d-flex gap-4">
							<a class="btn btn-info btn-sm mx-2" href="{{ path('recipe.show', { id: recipe.id, slug: recipe.slug }) }}">
								<i class="bi bi-eye"></i> View
							</a>

							<a class="btn btn-secondary mx-2 btn-sm" href="{{ path('recipe.edit', { id: recipe.id }) }}">
								<i class="bi bi-pencil"></i> Edit
							</a>

							<form class="d-flex mx-2" action="{{ path('recipe.delete', { id: recipe.id }) }}" method="post"
								onsubmit="return confirm('Are you sure you want to delete this recipe?');">
								<input type="hidden" name="_method" value="DELETE">
								<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ recipe.id) }}">
								<button type="submit" class="btn btn-danger btn-sm">
									<i class="bi bi-trash"></i> Delete
								</button>
							</form>
						</div>
					</td>
				</tr>
			{% else %}
				<tr>
					<td colspan="3">No recipes found.</td>
				</tr>
			{% endfor %}
		</table>

	</div>

{% endblock %}
